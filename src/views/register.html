<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/css/main.css" />
		<link rel="stylesheet" href="/css/form.css" />
		<title>Document</title>
	</head>
	<body>
		<form
			id="form"
			action="/api/register"
			method="post"
			enctype="multipart/form-data"
		>
			<h1>Register</h1>

			<fieldset>
				<label for="username">Username</label>
				<input type="text" name="username" id="username" />

				<label for="password">Password</label>
				<input type="password" name="password" id="password" />

				<label for="role">Benutzertyp</label>
				<select name="role" id="role">
					<option value="student">Sch√ºler</option>
					<option value="teacher">Lehrperson</option>
					<option value="firm">Lehrbetrieb</option>
				</select>
			</fieldset>

			<button id="submit" type="submit">submit</button>
		</form>

		<script>
			document.getElementById('form').onsubmit = async ev => {
				ev.preventDefault();

				const username = document.getElementById('username').value;
				const password = document.getElementById('password').value;

				const formData = new FormData();

				formData.append('username', username);
				formData.append('password', password);

				const res = await fetch('/api/register', {
					method: 'post',
					body: formData,
				});

				if (res.ok) {
					window.location.replace('/login.html');
				}
			};
		</script>
	</body>
</html>
